| é”ç±»å‹                 | ç®€è¦å®šä¹‰              | é¡¹ç›®ä¸­å…¸å‹ä½¿ç”¨åœºæ™¯                                                |
| ------------------- | ----------------- | -------------------------------------------------------- |
| **å…¨å±€é”**             | é”ä½æ•´ä¸ªæ•°æ®åº“ï¼Œåªè¯»           | é¡¹ç›®éƒ¨ç½²å‰å…¨åº“é€»è¾‘å¤‡ä»½ï¼Œä½¿ç”¨ `FLUSH TABLES WITH READ LOCK` é˜²æ­¢æ•°æ®å˜æ›´é€ æˆä¸ä¸€è‡´ |
| **è¡¨é”**              | é”æ•´å¼ è¡¨ï¼ŒMyISAM é»˜è®¤           | ç®¡ç†åå°å¯¼å‡ºå¤§è¡¨æ•°æ®ï¼ŒçŸ­æ—¶é—´åªè¯»é”è¡¨é˜²æ­¢å†™å…¥ï¼ˆ`LOCK TABLES table_name READ`ï¼‰    |
| **å…ƒæ•°æ®é”ï¼ˆMDLï¼‰**       | é”è¡¨ç»“æ„å…ƒä¿¡æ¯ï¼Œé˜²æ­¢ DDL å†²çª | çº¿ä¸Šå˜æ›´å­—æ®µï¼Œå¡ä½å…¶ä»–è¯»å†™è¯·æ±‚ï¼Œé¿å…â€œå†™æ—¶æ”¹ç»“æ„â€å‡ºé”™                              |
| **æ„å‘é”**             | è¡¨çº§é”ï¼Œç”¨äºåè°ƒè¡Œé”/è¡¨é”       | é«˜å¹¶å‘ä¸‹äº‹åŠ¡éœ€åˆ¤æ–­æ˜¯å¦èƒ½åŠ æ’ä»–é”ï¼ˆä¾‹å¦‚ï¼šä¸€æ¬¡æ€§é”è¡¨æ›´æ–°ï¼‰                             |
| **AUTO-INC é”**      | æ§åˆ¶è‡ªå¢åˆ—æ’å…¥å”¯ä¸€æ€§             | å¤šçº¿ç¨‹å¯¼å…¥è®¢å•è®°å½•ï¼Œè‡ªå¢ä¸»é”®å¿…é¡»å”¯ä¸€ï¼ˆå¦‚è®¢å•å·ï¼‰                                 |
| **è®°å½•é” Record Lock** | é”å•æ¡ç´¢å¼•è®°å½•                 | ç”¨æˆ·ä¿®æ”¹ä¸ªäººèµ„æ–™ï¼Œé”å®š user è¡¨ä¸­æŸæ¡è®°å½•é¿å…å¹¶å‘å†™å…¥                            |
| **é—´éš™é” Gap Lock**    | é”ç´¢å¼•é—´éš™ï¼Œé˜²æ­¢å¹»è¯»           | åŒä¸€äº‹åŠ¡ä¸­æŸ¥è¯¢ `id > 100 and id < 200`ï¼Œé¿å…åˆ«çš„äº‹åŠ¡æ’å…¥ id=150          |
| **Next-Key Lock**   | é—´éš™ + è®°å½•é”ç»„åˆ                | é˜²æ­¢å¹»è¯»ä¸”ç²¾ç¡®æ§åˆ¶èŒƒå›´æ›´æ–°ï¼Œä¾‹å¦‚â€œæ›´æ–°æˆç»©åœ¨70\~90ä¹‹é—´çš„ç”¨æˆ·â€                       |
| **æ’å…¥æ„å‘é”**           | äº‹åŠ¡è¡¨ç¤ºæƒ³åœ¨æŸä¸ªé—´éš™æ’å…¥      | ç§’æ€åœºæ™¯å¹¶å‘æ’å…¥è®¢å•ï¼Œå¦‚æœæ’å…¥ä½ç½®ä¸å†²çªï¼Œä¸äº’ç›¸ç­‰å¾…                               |




å…¨å±€é”ï¼šÂ é”ä½æ•´ä¸ªæ•°æ®åº“å®ä¾‹ï¼Œä½¿æ•°æ®åº“åªè¯»ï¼Œç”¨äºå…¨åº“å¤‡ä»½ã€‚

ğŸšª ä¸€ã€MySQL å„ç±»é”æ€»ç»“ + é¡¹ç›®åœºæ™¯åº”ç”¨
å…¨å±€é”	é”ä½æ•´ä¸ªæ•°æ®åº“ï¼Œåªè¯»	é¡¹ç›®éƒ¨ç½²å‰å…¨åº“é€»è¾‘å¤‡ä»½ï¼Œä½¿ç”¨ FLUSH TABLES WITH READ LOCK é˜²æ­¢æ•°æ®å˜æ›´é€ æˆä¸ä¸€è‡´
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
è¡¨é”	é”æ•´å¼ è¡¨ï¼ŒMyISAM é»˜è®¤	ç®¡ç†åå°å¯¼å‡ºå¤§è¡¨æ•°æ®ï¼ŒçŸ­æ—¶é—´åªè¯»é”è¡¨é˜²æ­¢å†™å…¥ï¼ˆLOCK TABLES table_name READï¼‰

è¡¨é” ä¸æ˜¯åªæœ‰ MyISAM æ‰ç”¨ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨è¡¨é”ï¼ˆå¦‚é€šè¿‡ LOCK TABLES æ‰‹åŠ¨åŠ é”ï¼‰ï¼Œåªæ˜¯ï¼š

MyISAM é»˜è®¤åªæ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé”ã€‚
è€Œ InnoDB æ”¯æŒæ›´ç»†ç²’åº¦çš„è¡Œé”ï¼Œä¹Ÿæ”¯æŒè¡¨é”ï¼ˆé€šè¿‡æ˜¾å¼ LOCK TABLESï¼‰ã€‚

 LOCK TABLES xxx READ çš„ä½œç”¨
âœ… å…è®¸å½“å‰çº¿ç¨‹ è¯»å–è¡¨çš„æ•°æ®ï¼ˆSELECTï¼‰ã€‚

âŒ ç¦æ­¢å½“å‰çº¿ç¨‹ä»¥å¤–çš„çº¿ç¨‹ å¯¹è¯¥è¡¨æ‰§è¡Œ SELECT/INSERT / UPDATE / DELETE / ALTER ç­‰å†™æ“ä½œã€‚

âŒ å½“å‰çº¿ç¨‹è‡ªå·±ä¹Ÿä¸èƒ½å¯¹è¡¨æ‰§è¡Œå†™æ“ä½œï¼ˆé™¤éä½¿ç”¨ READ LOCALï¼Œä½†é‚£åˆæ˜¯å¦ä¸€ç§æƒ…å†µï¼‰ã€‚

ä¼šè¯ Aï¼š

LOCK TABLES product READ;
SELECT * FROM product;  -- âœ… å¯ä»¥æ‰§è¡Œ
UPDATE product SET price = 100 WHERE id = 1;  -- âŒ ä¸å…è®¸ï¼Œå³ä½¿æ˜¯è‡ªå·±

ğŸ§ª å®éªŒæ¼”ç¤ºï¼ˆInnoDBï¼‰
ä¼šè¯ Aï¼š

LOCK TABLES product READ;
ä¼šè¯ Bï¼š

SELECT * FROM product;

-- â³ ä¼šå¡ä½ï¼Œç›´åˆ° A æ‰§è¡Œ UNLOCK TABLES
å› ä¸º MySQL çš„è¡¨é”æ˜¯æ˜¾å¼åŠ é”ï¼ˆä¸åŒºåˆ†æ˜¯è¯»è¿˜æ˜¯å†™çº¿ç¨‹ï¼‰ï¼Œ
é™¤éä½ ä½¿ç”¨ READ LOCAL é”æ¨¡å¼ï¼Œå®ƒå…è®¸å…¶ä»–çº¿ç¨‹æ‰§è¡Œéæ­£åœ¨ä¿®æ”¹çš„ MyISAM è¡¨çš„ SELECT æ“ä½œï¼ˆä»…é™ MyISAMï¼‰ã€‚
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
